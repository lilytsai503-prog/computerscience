<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Profile</title>
    <link rel="stylesheet" href="style.css">
    <style>.header-bar { background-color: transparent; }</style>
</head>
<body>
    <div id="overlay" onclick="closeNav()"></div>
    <div id="toast"></div>

        <div id="mySidenav" class="sidenav">
        <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
        <a href="index.html">ğŸ“Š Dashboard</a>
        <a href="profile.html">ğŸ‘¤ User Profile</a>
        <a href="diet.html">ğŸ Diet Tracker</a>
        <a href="walking.html">ğŸ‘£ Walking</a>
        <a href="water.html">ğŸ’§ Water Tracker</a>
        <a href="sedentary.html">ğŸª‘ Sedentary Timer</a>
        <a href="stairs.html">ğŸªœ Stairs Tracker</a>
        <a href="sleep.html">ğŸ˜´ Sleep Manager</a>
        <a href="exercise.html">ğŸƒ Exercise</a>
    </div>

    <div class="header-bar">
        <span class="menu-icon" onclick="openNav()">&#9776;</span>
    </div>

    <div class="container" style="margin-top: 0;">
        <h2>ğŸ‘¤ Personal Information</h2>
        <p>Enter your details to calculate BMI & calibrate goals.</p>

        <label>Age:</label>
        <input type="number" id="input-age" placeholder="e.g. 25">
        <label>Height (cm):</label>
        <input type="number" id="input-height" placeholder="e.g. 175">
        <label>Weight (kg):</label>
        <input type="number" id="input-weight" placeholder="e.g. 70">

        <button onclick="saveProfile()">Save & Calculate BMI</button>

        <div id="bmi-box" class="bmi-result">
            <h3>Your BMI</h3>
            <div class="bmi-value" id="display-bmi">--</div>
            <p id="bmi-category" style="color: #666; margin-bottom:0;"></p>
        </div>
    </div>

    <script>
        function openNav() { document.getElementById("mySidenav").style.width = "250px"; document.getElementById("overlay").style.display = "block"; }
        function closeNav() { document.getElementById("mySidenav").style.width = "0"; document.getElementById("overlay").style.display = "none"; }
        function showToast(msg) {
            const t = document.getElementById("toast"); t.textContent = msg; t.className = "show";
            setTimeout(() => { t.className = t.className.replace("show", ""); }, 3000);
        }

        window.onload = function() {
            const savedAge = localStorage.getItem('profileAge');
            const savedHeight = localStorage.getItem('profileHeight');
            const savedWeight = localStorage.getItem('profileWeight');
            if(savedAge) document.getElementById('input-age').value = savedAge;
            if(savedHeight) document.getElementById('input-height').value = savedHeight;
            if(savedWeight) document.getElementById('input-weight').value = savedWeight;
            if(savedHeight && savedWeight) calculateBMI(savedHeight, savedWeight);
        };

        function saveProfile() {
            const age = document.getElementById('input-age').value;
            const height = document.getElementById('input-height').value;
            const weight = document.getElementById('input-weight').value;
            if(!age || !height || !weight) return showToast('Please fill in all fields.');

            localStorage.setItem('profileAge', age);
            localStorage.setItem('profileHeight', height);
            localStorage.setItem('profileWeight', weight);
            calculateBMI(height, weight);
            showToast('Profile Saved!');
        }

        function calculateBMI(h, w) {
            const heightInMeters = h / 100;
            const bmi = (w / (heightInMeters * heightInMeters)).toFixed(1);
            document.getElementById('bmi-box').style.display = 'block';
            document.getElementById('display-bmi').textContent = bmi;
            let category = '';
            if(bmi < 18.5) category = '(Underweight)';
            else if(bmi < 24.9) category = '(Normal weight)';
            else if(bmi < 29.9) category = '(Overweight)';
            else category = '(Obese)';
            document.getElementById('bmi-category').textContent = category;
        }
    </script>
</body>
</html>